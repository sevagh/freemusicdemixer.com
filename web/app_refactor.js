function segmentWaveform(s,t,l,n){var i=s.length,a=Math.ceil(i/l),r=[];for(let e=0;e<l;e++){var c,o=e*a,h=Math.min(i,o+a),m=new Float32Array(h-o+2*n),f=new Float32Array(h-o+2*n);0===e?(m.fill(s[0],0,n),f.fill(t[0],0,n)):(m.set(s.slice(o-n,o),0),f.set(t.slice(o-n,o),0)),e===l-1?(c=i-h,m.set(s.slice(h,h+Math.min(n,c)),h-o+n),f.set(t.slice(h,h+Math.min(n,c)),h-o+n)):(m.set(s.slice(h,h+n),h-o+n),f.set(t.slice(h,h+n),h-o+n)),m.set(s.slice(o,h),n),f.set(t.slice(o,h),n),r.push([m,f])}return r}function processSegments(t,e,s,l,n,i,a=null){segmentWaveform(e,s,l,i).forEach((e,s)=>{t[s].postMessage({msg:a?"PROCESS_AUDIO_BATCH":"PROCESS_AUDIO",leftChannel:e[0],rightChannel:e[1],originalLength:n,...a&&{filename:a}})})}export{processSegments};